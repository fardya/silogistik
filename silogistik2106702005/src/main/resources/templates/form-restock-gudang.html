<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <object th:include="~{fragments/common :: js}" th:remove="tag"></object>
  <object th:include="~{fragments/common :: css}" th:remove="tag"></object>
  <title>Restock Gudang</title>
</head>

<body>
<nav th:replace="~{fragments/navbar :: navbar}"></nav>
<br>
<div class="container">
  <div class="card m-4">
    <div class="card-header p-3 d-flex justify-content-between align-items-center">
      <h3 class="m-0">Restock Gudang</h3>
    </div>
    <form th:action="@{/gudang/restock-barang}" th:object="${gudangDTO}" method="POST">
      <div class="card-body p-4">

        <div class="row">
          <div class="col-4">
            <p>Nama Gudang</p>
          </div>
          <div class="col-8">
            <p th:text="': ' + *{nama}"></p>
          </div>
        </div>

        <div class="row">
          <div class="col-4">
            <p>Alamat Gudang</p>
          </div>
          <div class="col-8">
            <p th:text="': ' + *{alamatGudang}"></p>
          </div>
        </div>

      <br>
        <input class="form-control" type="hidden" th:field="*{id}"/>
        <input class="form-control" type="hidden" th:field="*{nama}"/>
        <input class="form-control" type="hidden" th:field="*{alamatGudang}"/>
        <input class="form-control" type="hidden" th:field="*{listGudangBarang}"/>
        <th class="d-flex justify-content-end">
          <button class="btn btn-primary" type="submit" name="tambahBarang" style="text-align:right">+ Tambah Barang</button>
        </th>
        <table class="table table-bordered mt-2">
          <thead class="thead-dark">
          <tr>
            <th scope="col" class="text-center">#</th>
            <th scope="col" class="text-center">Barang</th>
            <th scope="col" class="text-center">Kuantitas</th>
          </tr>
          </thead>

          <tbody>
          <tr th:each="gb, iterationStatus: ${listGudangBarang}">
            <td th:text="${iterationStatus.index + 1}"></td>
            <td class="row">
              <select th:field="*listGudangBarang[__${iterationStatus.index}__].barang}" class="form-control">
                <div th:each="barangExisting: ${listBarangExisting}">
                  <option th:value="${barangExisting.skuBarang}" th:text="${barangExisting.merk}"></option>
                </div>
              </select>

              <div class="col">
                <input class="form-control" type="number" th:field="*{listGudangBarang[__${iterationStatus.index}__].stok}">
              </div>
            </td>
            <td>

          </tr>
          </tbody>
        </table>
      </div>
    </form>
      <br>
      <div style="text-align: center;">
        <a class="btn btn-danger" th:href="@{/gudang/{idGudang}(idGudang=${gudangDTO.id})}">Batal</a>
        <button class="btn btn-primary" type="submit">Simpan</button>
      </div>
    <br>
    </div>
  </div>
</div>

</body>
</html>